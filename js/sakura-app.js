// build time:Thu Jun 24 2021 13:33:47 GMT+0800 (中国标准时间)
var e=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function t(a){if(a==null||(typeof a==="undefined"?"undefined":e(a))!="object")return a;if(a instanceof Date){var n=new Date(a.getDate());return n}if(a instanceof Array){for(var n=[],i=0,o=a.length;i<o;i++)n[i]=a[i];return n}if(a instanceof Object){n={};for(i in a)a.hasOwnProperty(i)&&(n[i]=t(a[i]));return n}}mashiro_global.variables=new function(){this.has_bot_ui=false;this.isNight=false;this.skinSecter=false};mashiro_global.ini=new function(){this.normalize=function(){lazyload();social_share();mashiro_global.post_list_show_animation.ini();d();if(window.is_app){try{setTimeout(function(){mashiro_option.app_update(true)},1e4)}catch(e){}}if($("div").hasClass("poem-wrap")){D("#poem","#info")}$(function(){function e(){$("#banner_wave_1").css({left:"-236px"}).animate({left:"-1233px"},25e3,"linear",e)}function t(){$("#banner_wave_2").css({left:"0px"}).animate({left:"-1009px"},6e4,"linear",t)}if(screen&&screen.width>860){e();t()}if(navigator.userAgent.indexOf("AppleWebKit")!=-1){$("body").addClass("isWebKit")}P()})};this.pjax=function(){T();social_share();mashiro_global.post_list_show_animation.ini();d();if($("div").hasClass("poem-wrap")){D("#poem","#info")}P()}};mashiro_global.lib=new function(){this.removeClass=function(e,t){var a=document.getElementById(e);if(a.classList){a.classList.remove(t)}else{a.className=a.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}};this.addClass=function(e,t){var a=document.getElementById(e);if(a.classList){a.classList.add(t)}else{a.className+=" "+t}};this.hasClass=function(e,t){var a=document.getElementById(e);if(a.classList){var n=a.classList.contains(t)}else{var n=new RegExp("(^| )"+t+"( |$)","gi").test(a.className)}return n};this.toggleClass=function(e,t){var a=document.getElementById(e);if(a.classList){a.classList.toggle(t)}else{var n=a.className.split(" ");var i=n.indexOf(t);if(i>=0){n.splice(i,1)}else{n.push(t)}a.className=n.join(" ")}};this.saveFile=function(e,t){var a=new XMLHttpRequest;a.responseType="blob";a.onload=function(){var e=document.createElement("a");e.href=window.URL.createObjectURL(a.response);e.download=t;e.style.display="none";document.body.appendChild(e);e.click()};a.open("GET",e);a.send()}};function a(e,t,a){var n="";if(a){var i=new Date;i.setTime(i.getTime()+a*24*60*60*1e3);n="; expires="+i.toUTCString()}document.cookie=e+mashiro_option.cookie_version_control+"="+(t||"")+n+"; path=/"}function n(e){var t=e+mashiro_option.cookie_version_control+"=";var a=document.cookie.split(";");for(var n=0;n<a.length;n++){var i=a[n];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null}function i(e){document.cookie=e+mashiro_option.cookie_version_control+"=; Max-Age=-99999999;"}function o(e){return mashiro_global.lib.pjax_to_url(e,"#page")}function s(e){var t=$("<div />",{html:"&shy;<style>"+e+"</style>"}).appendTo("body")}function r(e,t){switch(t){case 1:if(e.src.includes("https://cn.gravatar.com/avatar")){e.src=e.src.replace("https://cn.gravatar.com/avatar/","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/gravatar.jpg")}else{e.src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/default_avatar.jpg"}break;case 2:e.src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/default_gavatar.jpg";break;case 3:e.src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/image-404.png";break;default:e.src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/image-404.png"}}mashiro_global.post_list_show_animation=new function(){this.ini=function(e){$("article.post-list-thumb").each(function(t){if(e){var a=$(window).height()}else{if($(".headertop").hasClass("headertop-bar")){var a=0}else{var a=$(window).height()-300}}if(!mashiro_global.landing_at_home){a+=300}var n=$("article.post-list-thumb").eq(t).offset().top;if($(window).height()+$(window).scrollTop()>=n){$("article.post-list-thumb").eq(t).addClass("post-list-show")}$(window).scroll(function(){var e=$(window).scrollTop();if(e+a>=n&&e){$("article.post-list-thumb").eq(t).addClass("post-list-show")}})})}};mashiro_global.font_control=new function(){this.change_font=function(){if($("body").hasClass("serif")){$("body").removeClass("serif");$(".control-btn-serif").removeClass("selected");$(".control-btn-sans-serif").addClass("selected");a("font_family","sans-serif",30)}else{$("body").addClass("serif");$(".control-btn-serif").addClass("selected");$(".control-btn-sans-serif").removeClass("selected");a("font_family","serif",30);if(document.body.clientWidth<=860){addComment.createButterbar("将从网络加载字体，流量请注意")}}};this.ini=function(){if(document.body.clientWidth>860){if(!n("font_family")||n("font_family")=="serif"){$("body").addClass("serif")}}if(n("font_family")=="sans-serif"){$("body").removeClass("sans-serif");$(".control-btn-serif").removeClass("selected");$(".control-btn-sans-serif").addClass("selected")}}};mashiro_global.font_control.ini();function l(){function e(e){var t={autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"false",design:"by hojun"};var a=$("pre:eq("+e+")")[0].children[0].className;var n=a.substr(0,a.indexOf(" ")).replace("language-","");if(n.toLowerCase()=="hljs")var n="text";if(n.toLowerCase()=="js")var n="javascript";if(n.toLowerCase()=="md")var n="markdown";if(n.toLowerCase()=="py")var n="python";$("pre:eq("+e+")").addClass("highlight-wrap");for(var i in t){$("pre:eq("+e+")").attr(i,t[i])}$("pre:eq("+e+") code").attr("data-rel",n.toUpperCase())}$("pre code").each(function(e,t){hljs.highlightBlock(t)});for(var t=0;t<$("article pre").length;t++){e(t)}$("pre").on("click",function(e){if(e.target!==this)return;$(this).toggleClass("code-block-fullscreen");$("html").toggleClass("code-block-fullscreen-html-scroll")});hljs.initLineNumbersOnLoad()}try{l()}catch(c){}function d(){$("pre code").each(function(e,t){$(t).attr({id:"hljs-"+e});$(this).after('<a class="copy-code" href="javascript:" data-clipboard-target="#hljs-'+e+'" title="拷贝代码"><i class="fa fa-clipboard" aria-hidden="true"></i></a>')});var e=new ClipboardJS(".copy-code")}function u(){$("#upload-img-file").change(function(){if(this.files.length>10){addComment.createButterbar("每次上传上限为10张.<br>10 files max per request.");return 0}for(e=0;e<this.files.length;e++){if(this.files[e].size>=5242880){alert("图片上传大小限制为5 MB.\n5 MB max per file.\n\n「"+this.files[e].name+"」\n\n这张图太大啦~\nThis image is too large~")}}for(var e=0;e<this.files.length;e++){var t=this.files[e];var a=new FormData;a.append("smfile",t);$.ajax({url:"https://sm.ms/api/upload",type:"POST",processData:false,contentType:false,data:a,beforeSend:function(e){$(".insert-image-tips").html('<i class="fa fa-spinner rotating" aria-hidden="true"></i>');addComment.createButterbar("上传中...<br>Uploading...")},success:function(e){$(".insert-image-tips").html('<i class="fa fa-check" aria-hidden="true"></i>');setTimeout(function(){$(".insert-image-tips").html('<i class="fa fa-picture-o" aria-hidden="true"></i>')},1e3);var t=e.data.url.replace("https://i.loli.net/","https://static.shino.cc/user-upload/");$("#upload-img-show").append('<img class="lazyload upload-image-preview" src="https://cdn.jsdelivr.net/gh/moezx/cdn@3.0.2/img/svg/loader/trans.ajax-spinner-preloader.svg" data-src="'+t+'" onclick="window.open(\''+t+'\')" onerror="imgError(this)" />');lazyload();addComment.createButterbar("图片上传成功~<br>Uploaded successfully~");I(e.data.url.replace("https://i.loli.net/","{UPLOAD}"),type="Img")},error:function(){$(".insert-image-tips").html('<i class="fa fa-times" aria-hidden="true" style="color:red"></i>');alert("上传失败，请重试.\nUpload failed, please try again.");setTimeout(function(){$(".insert-image-tips").html('<i class="fa fa-picture-o" aria-hidden="true"></i>')},1e3)}})}})}function h(){$("#upload-img-show").html("")}function m(){$('<div class="insert-image-tips popup"><i class="fa fa-picture-o" aria-hidden="true"></i><span class="insert-img-popuptext" id="uploadTipPopup">上传图片</span></div><input id="upload-img-file" type="file" accept="image/*" multiple="multiple" class="insert-image-button">').insertAfter($(".form-submit #submit"));u();$("#upload-img-file").hover(function(){$(".insert-image-tips").addClass("insert-image-tips-hover");$("#uploadTipPopup").addClass("show")},function(){$(".insert-image-tips").removeClass("insert-image-tips-hover");$("#uploadTipPopup").removeClass("show")})}function p(){$(".comment_inline_img").click(function(){var e=$(this).attr("src");window.open(e)})}p();function f(){$(".emoji-item").click(function(){I($(this).text(),type="custom",before="`",after="` ")})}f();function g(e){var t=e.querySelector("#thePopup");t.classList.toggle("show")}function v(e){var t=$(e).find("#thePopup");t.addClass("show");$(e).find("input").blur(function(){t.removeClass("show")})}function b(){var e=$("#content").offset().top;$("html,body").animate({scrollTop:e},600)}function _(){if(document.body.clientWidth>860){$(window).scroll(function(){var e=$(window).scrollTop();var t=$(document).height();var a=$(window).height();var n=parseInt(e/(t-a)*100);$("#bar").css("width",n+"%");if(false){if(n>=0&&n<=19){$("#bar").css("background","#cccccc")}if(n>=20&&n<=39){$("#bar").css("background","#50bcb6")}if(n>=40&&n<=59){$("#bar").css("background","#85c440")}if(n>=60&&n<=79){$("#bar").css("background","#f2b63c")}if(n>=80&&n<=99){$("#bar").css("background","#FF0000")}if(n==100){$("#bar").css("background","#5aaadb")}}else{$("#bar").css("background","orange")}$(".toc-container").css("height",$(".site-content").outerHeight());$(".skin-menu").removeClass("show")})}}_();"主题切换代码好恶心，有空一定要重构";function y(){var e=n("bgImgSetting");if(!e){$("#banner_wave_1").removeClass("banner_wave_hide_fit_skin");$("#banner_wave_2").removeClass("banner_wave_hide_fit_skin")}else{$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin")}if(e!=""){if(e=="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/sakura.png"||e=="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/plaid.jpg"||e=="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/star.png"||e=="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/point.png"||e=="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/little-monster.png"){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=false;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+e+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura")}else if(e=="https://api.shino.cc/bing/"){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=true;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+e+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura")}else{}}else{return false}}if(document.body.clientWidth>860){y()}function w(){$(".post-thumb img").bind("contextmenu",function(e){return false})}if(mashiro_global.variables.isNight){$(".changeSkin-gear, .toc").css("background","rgba(255,255,255,0.8)")}else{$(".changeSkin-gear, .toc").css("background","none")}$(document).ready(function(){function e(e,t){$(".skin-menu "+e).click(function(){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=false;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+t+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin");n();a("bgImgSetting",t,30)})}function t(e,t){$(".skin-menu "+e).click(function(){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=true;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+t+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin");n();a("bgImgSetting",t,30)})}e("#sakura-bg","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/sakura.png");e("#gribs-bg","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/plaid.jpg");e("#pixiv-bg","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/star.png");e("#KAdots-bg","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/point.png");e("#totem-bg","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/little-monster.png");t("#bing-bg","https://api.shino.cc/bing/");$(".skin-menu #white-bg").click(function(){mashiro_global.variables.skinSecter=false;mashiro_global.variables.isNight=false;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","none");$(".blank").css("background-color","rgba(255,255,255,.0)");$(".pattern-center-sakura").removeClass("pattern-center-sakura").addClass("pattern-center");$(".headertop-bar-sakura").removeClass("headertop-bar-sakura").addClass("headertop-bar");$("#banner_wave_1").removeClass("banner_wave_hide_fit_skin");$("#banner_wave_2").removeClass("banner_wave_hide_fit_skin");n();a("bgImgSetting","",30)});$(".skin-menu #dark-bg").click(function(){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=true;$("body").css("background-image","url(https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/starry_sky.png)");$(".blank").css("background-color","rgba(255,255,255,.8)");$("#night-mode-cover").css("visibility","visible");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin");n()});function n(){$(".skin-menu").removeClass("show");setTimeout(function(){$(".changeSkin-gear").css("visibility","visible")},300);if(mashiro_global.variables.isNight){$(".changeSkin-gear, .toc").css("background","rgba(255,255,255,0.8)")}else{$(".changeSkin-gear, .toc").css("background","none")}}$(".changeSkin-gear").click(function(){$(".skin-menu").toggleClass("show");if(mashiro_global.variables.isNight){$(".changeSkin").css("background","rgba(255,255,255,0.8)")}else{$(".changeSkin").css("background","none")}});$(".skin-menu #close-skinMenu").click(function(){n()});m()});function k(){bgindex=bgindex+1;console.log(bg[Math.abs(bgindex%bg.length)]);$(".centerbg").css("background-image",'url("'+bg[Math.abs(bgindex%bg.length)]+'")')}function C(){bgindex=bgindex-1;console.log(bg[Math.abs(bgindex%bg.length)]);$(".centerbg").css("background-image",'url("'+bg[Math.abs(bgindex%bg.length)]+'")')}$(document).ready(function(){var e=Math.floor(Math.random()*bg.length);$(".centerbg").css("background-image",'url("'+bg[e]+'")');$("#bg-next").click(function(){k()});$("#bg-pre").click(function(){C()})});if(document.body.clientWidth<=860&&!window.is_app){window.onscroll=function(){j()};function j(){if(document.body.scrollTop>20||document.documentElement.scrollTop>20){document.getElementById("moblieGoTop").style.display="block"}else{document.getElementById("moblieGoTop").style.display="none"}}function x(){document.body.scrollTop=0;document.documentElement.scrollTop=0}}function q(){BirthDay=new Date("06/02/2017 18:00:00");today=new Date;timeold=today.getTime()-BirthDay.getTime();sectimeold=timeold/1e3;secondsold=Math.floor(sectimeold);msPerDay=24*60*60*1e3;e_daysold=timeold/msPerDay;daysold=Math.floor(e_daysold);monitorday.innerHTML=daysold}function S(e){if(e==true){$("#archives span.al_mon").click(function(){$(this).next().slideToggle(400);return false});lazyload()}else{(function(){$("#al_expand_collapse,#archives span.al_mon").css({cursor:"s-resize"});$("#archives span.al_mon").each(function(){var e=$(this).next().children("li").length;$(this).children("#post-num").text(e)});var e=$("#archives ul.al_post_list"),t=$("#archives ul.al_post_list:first");e.hide(1,function(){t.show()});$("#archives span.al_mon").click(function(){$(this).next().slideToggle(400);return false});if(document.body.clientWidth>860){$("#archives li.al_li").mouseover(function(){$(this).children(".al_post_list").show(400);return false});if(false){$("#archives li.al_li").mouseout(function(){$(this).children(".al_post_list").hide(400);return false})}}var a=0;$("#al_expand_collapse").click(function(){if(a==0){e.show();a++}else if(a==1){e.hide();a--}})})()}}S();var T=function(){m();p();f();mashiro_global.font_control.ini();$("p").remove(".head-copyright");try{l()}catch(e){}try{O()}catch(e){}lazyload();try{q()}catch(e){}if(mashiro_global.variables.skinSecter===true){$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");if(mashiro_global.variables.isNight){$(".blank").css("background-color","rgba(255,255,255,1)");$(".toc").css("background-color","rgba(255,255,255,0.8)")}}$(".iconflat").css("width","50px").css("height","50px");$(".openNav").css("height","50px");$("#bg-next").click(function(){k()});$("#bg-pre").click(function(){C()});N();S();M();console.log($("#myscript").text())};$(document).on("click",".sm",function(){var e="您真的要设为私密吗？";if(confirm(e)==true){$(this).commentPrivate()}else{aler("已取消")}});$.fn.commentPrivate=function(){if($(this).hasClass("private_now")){alert("您之前已设过私密评论");return false}else{$(this).addClass("private_now");var e=$(this).data("idp"),t=$(this).data("actionp"),a=$(this).children(".has_set_private");var n={action:"siren_private",p_id:e,p_action:t};$.post("/wp-admin/admin-ajax.php",n,function(e){$(a).html(e)});return false}};function B(){BirthDay=new Date("2020-02-11 18:00:00");today=new Date;timeold=today.getTime()-BirthDay.getTime();sectimeold=timeold/1e3;secondsold=Math.floor(sectimeold);msPerDay=24*60*60*1e3;e_daysold=timeold/msPerDay;daysold=Math.floor(e_daysold);monitorday.innerHTML=daysold}try{B()}catch(c){}POWERMODE.colorful=true;POWERMODE.shake=false;document.body.addEventListener("input",POWERMODE);function E(e){var t=[".bili",".menhera",".tieba"];for(var a in t){$(t[a]+"-bar").removeClass("on-hover");$(t[a]+"-container").css("display","none")}$(e+"-bar").addClass("on-hover");$(e+"-container").css("display","block")}$(".comt-addsmilies").click(function(){$(".comt-smilies").toggle()});$(".comt-smilies a").click(function(){$(this).parent().hide()});function N(){$(document).ready(function(){$("#emotion-toggle").click(function(){$(".emotion-toggle-off").toggle(0);$(".emotion-toggle-on").toggle(0);$(".emotion-box").toggle(160)})})}N();function I(e,t,a,n){var i;if(t=="custom"){e=a+e+n}else if(t=="Img"){e="[img]"+e+"[/img]"}else if(t=="Math"){e=" f(x)=∫("+e+")sec²xdx "}else{e=" :"+e+": "}if(document.getElementById("comment")&&document.getElementById("comment").type=="textarea"){i=document.getElementById("comment")}else{return false}if(document.selection){i.focus();sel=document.selection.createRange();sel.text=e;i.focus()}else if(i.selectionStart||i.selectionStart=="0"){var o=i.selectionStart;var s=i.selectionEnd;var r=s;i.value=i.value.substring(0,o)+e+i.value.substring(s,i.value.length);r+=e.length;i.focus();i.selectionStart=r;i.selectionEnd=r}else{i.value+=e;i.focus()}}function M(){document.body.addEventListener("copy",function(t){if(!mashiro_global.is_user_logged_in&&window.getSelection().toString().length>30){if(mashiro_option.copyright_enable.indexOf("false")!=-1&&window.getSelection().toString().length>mashiro_option.copyright_minCharNumber){e(t)}}});function e(e){e.preventDefault();var t=""+mashiro_option.copyright_description+"<br>"+"作者："+mashiro_option.author_name+"<br>"+"链接："+window.location.href+"<br>"+"来源："+mashiro_option.site_name+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>");var a=""+mashiro_option.copyright_description+"\n"+"作者："+mashiro_option.author_name+"\n"+"链接："+window.location.href+"\n"+"来源："+mashiro_option.site_name+"\n\n"+window.getSelection().toString().replace(/\r\n/g,"\n");if(e.clipboardData){e.clipboardData.setData("text/html",t);e.clipboardData.setData("text/plain",a);addComment.createButterbar("复制成功！<br>Copied to clipboard successfully!",1e3)}else if(window.clipboardData){return window.clipboardData.setData("text",a)}}}M();$(function(){O()});function O(){var e=false;var t=/^[0-9]+$/;if(!n("user_qq")&&!n("user_qq_email")&&!n("user_author")){$("input#qq,input#author,input#email,input#url").val("")}if(n("user_avatar")&&n("user_qq")&&n("user_qq_email")){$("div.comment-user-avatar img").attr("src",n("user_avatar"));$("input#author").val(n("user_author"));$("input#email").val(n("user_qq")+"@qq.com");$("input#qq").val(n("user_qq"));if(mashiro_option.qzone_autocomplete){$("input#url").val("https://user.qzone.qq.com/"+n("user_qq"))}if($("input#qq").val()){$(".qq-check").css("display","block");$(".gravatar-check").css("display","none")}}var i=$("input#email").val();$("input#author").on("blur",function(){var n=$("input#author").val();$.ajax({type:"get",url:mashiro_option.qq_api_url+"?type=getqqnickname&qq="+n,dataType:"jsonp",jsonp:"callback",jsonpCallback:"portraitCallBack",success:function(t){$("input#author").val(t[n][6]);$("input#email").val($.trim(n)+"@qq.com");if(mashiro_option.qzone_autocomplete){$("input#url").val("https://user.qzone.qq.com/"+$.trim(n))}$("div.comment-user-avatar img").attr("src","https://q2.qlogo.cn/headimg_dl?dst_uin="+n+"&spec=100");e=true;$("input#qq").val($.trim(n));if($("input#qq").val()){$(".qq-check").css("display","block");$(".gravatar-check").css("display","none")}a("user_author",t[n][6],30);a("user_qq",n,30);a("is_user_qq","yes",30);a("user_qq_email",n+"@qq.com",30);a("user_email",n+"@qq.com",30);i=$("input#email").val()},error:function(){if(t.test(n)){addComment.createButterbar("QQ号不存在（建议不要使用纯数字昵称）")}$("input#qq").val("");$(".qq-check").css("display","none");$(".gravatar-check").css("display","block");$("div.comment-user-avatar img").attr("src",get_gravatar($("input#email").val(),80));a("user_qq","",30);a("user_email",$("input#email").val(),30);a("user_avatar",get_gravatar($("input#email").val(),80),30)}});$.ajax({type:"get",url:mashiro_option.qq_avatar_api_url+"?type=getqqavatar&qq="+n,dataType:"jsonp",jsonp:"callback",jsonpCallback:"qqavatarCallBack",beforeSend:function(){if(t.test(n)){addComment.createButterbar("正在获取QQ头像...")}},success:function(e){$("div.comment-user-avatar img").attr("src",e[n]);addComment.createButterbar("QQ头像获取成功");a("user_avatar",e[n],30)},error:function(){if(t.test(n)){addComment.createButterbar("QQ号不存在（建议不要使用纯数字昵称）")}$("input#qq","input#email","input#url").val("");if(!$("input#qq").val()){$(".qq-check").css("display","none");$(".gravatar-check").css("display","block");a("user_qq","",30);$("div.comment-user-avatar img").attr("src",get_gravatar($("input#email").val(),80));a("user_avatar",get_gravatar($("input#email").val(),80),30)}}})});if(n("user_avatar")&&n("user_email")&&n("is_user_qq")=="no"&&!n("user_qq_email")){$("div.comment-user-avatar img").attr("src",n("user_avatar"));$("input#email").val(n("user_email"));$("input#qq").val("");if(!$("input#qq").val()){$(".qq-check").css("display","none");$(".gravatar-check").css("display","block")}}$("input#email").on("blur",function(){var t=$("input#email").val();if(e==false||i!=t){$("div.comment-user-avatar img").attr("src",get_gravatar(t,80));a("user_avatar",get_gravatar(t,80),30);a("user_email",t,30);a("user_qq_email","",30);a("is_user_qq","no",30);$("input#qq").val("");if(!$("input#qq").val()){$(".qq-check").css("display","none");$(".gravatar-check").css("display","block")}}});if(n("user_url")){$("input#url").val(n("user_url"))}$("input#url").on("blur",function(){var e=$("input#url").val();$("input#url").val(e);a("user_url",e,30)});if(n("user_author")){$("input#author").val(n("user_author"))}$("input#author").on("blur",function(){var e=$("input#author").val();$("input#author").val(e);a("user_author",e,30)})}function D(e,t){var a=document.querySelector(e);var n=document.querySelector(t);var i=new XMLHttpRequest;i.open("get","https://v2.jinrishici.com/one.json");i.withCredentials=true;i.onreadystatechange=function(){if(i.readyState===4){var e=JSON.parse(i.responseText);a.innerHTML=e.data.content;n.innerHTML="【"+e.data.origin.dynasty+"】"+e.data.origin.author+"《"+e.data.origin.title+"》"}};i.send()}function L(){var e="mailto:"+mashiro_option.email_name+"@"+mashiro_option.email_domain;window.open(e)}function P(){if($("iframe").hasClass("hearthstone-deck")){$(".hearthstone-deck").each(function(){$(this).attr("height",$(this).width()*5/9+"px")});$(".hearthstone-deck-container").each(function(){var e=$(this).width()*5/9+14;$(this).css("height",e+"px")})}}var z=true;mashiro_global.ini.normalize();var Q=location.href,A=$("#bgvideo")[0],H={BSZ:function(){$.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js")},TOC:function(){if($(".toc").length>0&&document.body.clientWidth>1200){if($(".pattern-center").length>0){tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:true,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-400,scrollSmoothOffset:-85})}else{tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:true,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-85,scrollSmoothOffset:-85})}var e=$(".toc").offset().top-135;window.onscroll=function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;if(t>=e){$(".toc").addClass("toc-fixed")}else{$(".toc").removeClass("toc-fixed")}};$.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js")}},AB:function(){if(window.location.pathname.indexOf("about")>-1){$.getScript("/js/botui.js",function(){if(typeof botui==undefined&&!botui.message){bot_ui_ini()}})}},VA:function(){if(!e){var e=new Valine;e.init({el:"#vcomments",appId:mashiro_option.v_appId,appKey:mashiro_option.v_appKey,comment_count:true,notify:false,verify:true,path:window.location.pathname,placeholder:"祝开开心心！",avatar:"monsterid"})}},MJ:function(){if(mashiro_option.mathjax=="1"){$.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML",function(){MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}});var e=document.getElementsByClassName("entry-content")[0];MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])})}},MN:function(){$(".iconflat").on("click",function(){if($("#main-container").hasClass("open")){$(".iconflat").css("width","50px").css("height","50px");$(".openNav").css("height","50px")}else{$(".iconflat").css("width","100%").css("height","100%");$(".openNav").css("height","100%")}$("body").toggleClass("navOpen");$("#main-container,#mo-nav,.openNav").toggleClass("open")})},MNH:function(){if($("body").hasClass("navOpen")){$("body").toggleClass("navOpen");$("#main-container,#mo-nav,.openNav").toggleClass("open")}},splay:function(){$("#video-btn").addClass("video-pause").removeClass("video-play").show();$(".video-stu").css({bottom:"-100px"});$(".focusinfo").css({top:"-999px"});$("#banner_wave_1").addClass("banner_wave_hide");$("#banner_wave_2").addClass("banner_wave_hide");A.play()},spause:function(){$("#video-btn").addClass("video-play").removeClass("video-pause");$(".focusinfo").css({top:"49.3%"});$("#banner_wave_1").removeClass("banner_wave_hide");$("#banner_wave_2").removeClass("banner_wave_hide");A.pause()},liveplay:function(){if(A.oncanplay!=undefined&&$(".haslive").length>0){if($(".videolive").length>0){H.splay()}}},livepause:function(){if(A.oncanplay!=undefined&&$(".haslive").length>0){H.spause();$(".video-stu").css({bottom:"0px"}).html("已暂停 ...")}},addsource:function(){$(".video-stu").html("正在载入视频 ...").css({bottom:"0px"});var e=Poi.movies.name.split(","),t=e[Math.floor(Math.random()*e.length)];$("#bgvideo").attr("src",Poi.movies.url+"/"+t);$("#bgvideo").attr("video-name",t)},LV:function(){var e=$("#video-btn");e.on("click",function(){if($(this).hasClass("loadvideo")){$(this).addClass("video-pause").removeClass("loadvideo").hide();H.addsource();A.oncanplay=function(){H.splay();$("#video-add").show();e.addClass("videolive");e.addClass("haslive")}}else{if($(this).hasClass("video-pause")){H.spause();e.removeClass("videolive");$(".video-stu").css({bottom:"0px"}).html("已暂停 ...")}else{H.splay();e.addClass("videolive")}}A.onended=function(){$("#bgvideo").attr("src","");$("#video-add").hide();e.addClass("loadvideo").removeClass("video-pause");e.removeClass("videolive");e.removeClass("haslive");$(".focusinfo").css({top:"49.3%"})}});$("#video-add").on("click",function(){H.addsource()})},AH:function(){if(Poi.windowheight=="auto"){if($("h1.main-title").length>0){var e=$(window).height();$("#centerbg").css({height:e});$("#bgvideo").css({"min-height":e});$(window).resize(function(){H.AH()})}}else{$(".headertop").addClass("headertop-bar")}},PE:function(){if($(".headertop").length>0){if($("h1.main-title").length>0){$(".blank").css({"padding-top":"0px"});$(".headertop").css({height:"auto"}).show();if(Poi.movies.live=="open")H.liveplay();$(".site-header").addClass("is-homepage")}else{$(".blank").css({"padding-top":"75px"});$(".headertop").css({height:"0px"}).hide();H.livepause()}}},CE:function(){$(".comments-hidden").show();$(".comments-main").hide();$(".comments-hidden").click(function(){$(".comments-main").slideDown(500);$(".comments-hidden").hide()});$(".archives").hide();$(".archives:first").show();$("#archives-temp h3").click(function(){$(this).next().slideToggle("fast");return false});$(".js-toggle-search").on("click",function(){$(".js-toggle-search").toggleClass("is-active");$(".js-search").toggleClass("is-visible")});$(".search_close").on("click",function(){if($(".js-search").hasClass("is-visible")){$(".js-toggle-search").toggleClass("is-active");$(".js-search").toggleClass("is-visible")}});$("#show-nav").on("click",function(){if($("#show-nav").hasClass("showNav")){$("#show-nav").removeClass("showNav").addClass("hideNav");$(".site-top .lower nav").addClass("navbar");$(".mobile-fit-control").removeClass("hide");if(screen&&screen.width<=1200){$(".site-title").toggle()}}else{$("#show-nav").removeClass("hideNav").addClass("showNav");$(".site-top .lower nav").removeClass("navbar");$(".mobile-fit-control").addClass("hide");if(screen&&screen.width<=1200){$(".site-title").toggle()}}});$("#loading").click(function(){$("#loading").fadeOut(500)})},NH:function(){var e=0,t=50,a=$(document).scrollTop();$(window).scroll(function(){var n=$(document).scrollTop();if(n==e){$(".site-header").removeClass("yya")}if(n>e){$(".site-header").addClass("yya")}if(n>t){$(".site-header").addClass("gizle");if(n>a){$(".site-header").removeClass("sabit")}else{$(".site-header").addClass("sabit")}a=n}})},XLS:function(){$body=window.opera?document.compatMode=="CSS1Compat"?$("html"):$("body"):$("html,body");$("body").on("click","#pagination a",function(){$(this).addClass("loading").text("");$.ajax({type:"GET",url:$(this).attr("href")+"#main",success:function(e){result=$(e).find("#main .post");nextHref=$(e).find("#pagination a").attr("href");$("#main").append(result.fadeIn(500));$("#pagination a").removeClass("loading").text("Previous");lazyload();mashiro_global.post_list_show_animation.ini(50);if(nextHref!=undefined){$("#pagination a").attr("href",nextHref)}else{$("#pagination").html("<span>很高兴你翻到这里，但是真的没有了...</span>");
}}});return false})},XCS:function(){var e=jQuery("#cancel-comment-reply-link"),t=e.text(),a="commentwrap";jQuery(document).on("submit","#commentform",function(){jQuery.ajax({url:Poi.ajaxurl,data:jQuery(this).serialize()+"&action=ajax_comment",type:jQuery(this).attr("method"),beforeSend:addComment.createButterbar("提交中(Commiting)...."),error:function(e){var t=addComment;t.createButterbar(e.responseText)},success:function(e){jQuery("textarea").each(function(){this.value=""});var t=addComment,n=t.I("cancel-comment-reply-link"),i=t.I("wp-temp-form-div"),o=t.I(t.respondId),s=t.I("comment_post_ID").value,r=t.I("comment_parent").value;if(r!="0"){jQuery("#respond").before('<ol class="children">'+e+"</ol>")}else if(!jQuery("."+a).length){if(Poi.formpostion=="bottom"){jQuery("#respond").before('<ol class="'+a+'">'+e+"</ol>")}else{jQuery("#respond").after('<ol class="'+a+'">'+e+"</ol>")}}else{if(Poi.order=="asc"){jQuery("."+a).append(e)}else{jQuery("."+a).prepend(e)}}t.createButterbar("提交成功(Succeed)");lazyload();l();p();h();n.style.display="none";n.onclick=null;t.I("comment_parent").value="0";if(i&&o){i.parentNode.insertBefore(o,i);i.parentNode.removeChild(i)}}});return false});addComment={moveForm:function(a,n,i){var o=this,s,r=o.I(a),l=o.I(i),c=o.I("cancel-comment-reply-link"),d=o.I("comment_parent"),u=o.I("comment_post_ID");e.text(t);o.respondId=i;if(!o.I("wp-temp-form-div")){s=document.createElement("div");s.id="wp-temp-form-div";s.style.display="none";l.parentNode.insertBefore(s,l)}!r?(temp=o.I("wp-temp-form-div"),o.I("comment_parent").value="0",temp.parentNode.insertBefore(l,temp),temp.parentNode.removeChild(temp)):r.parentNode.insertBefore(l,r.nextSibling);jQuery("body").animate({scrollTop:jQuery("#respond").offset().top-180},400);d.value=n;c.style.display="";c.onclick=function(){var e=addComment,t=e.I("wp-temp-form-div"),a=e.I(e.respondId);e.I("comment_parent").value="0";if(t&&a){t.parentNode.insertBefore(a,t);t.parentNode.removeChild(t)}this.style.display="none";this.onclick=null;return false};try{o.I("comment").focus()}catch(h){}return false},I:function(e){return document.getElementById(e)},clearButterbar:function(e){if(jQuery(".butterBar").length>0){jQuery(".butterBar").remove()}},createButterbar:function(e,t){var a=this;a.clearButterbar();jQuery("body").append('<div class="butterBar butterBar--center"><p class="butterBar-message">'+e+"</p></div>");if(t>0){setTimeout("jQuery('.butterBar').remove()",t)}else{setTimeout("jQuery('.butterBar').remove()",6e3)}}}},XCP:function(){$body=window.opera?document.compatMode=="CSS1Compat"?$("html"):$("body"):$("html,body");$("body").on("click","#comments-navi a",function(e){e.preventDefault();$.ajax({type:"GET",url:$(this).attr("href"),beforeSend:function(){$("#comments-navi").remove();$("ul.commentwrap").remove();$("#loading-comments").slideDown();$body.animate({scrollTop:$("#comments-list-title").offset().top-65},800)},dataType:"html",success:function(e){result=$(e).find("ul.commentwrap");nextlink=$(e).find("#comments-navi");$("#loading-comments").slideUp("fast");$("#loading-comments").after(result.fadeIn(500));$("ul.commentwrap").after(nextlink);lazyload();l();p()}})})},IA:function(){POWERMODE.colorful=true;POWERMODE.shake=false;document.body.addEventListener("input",POWERMODE)},GT:function(){var e=100,t=1200,a=700,n=$(".cd-top");$(window).scroll(function(){if($(this).scrollTop()>e){n.addClass("cd-is-visible");$(".changeSkin-gear").css("bottom","0");if($(window).height()>950){$(".cd-top.cd-is-visible").css("top","0")}else{$(".cd-top.cd-is-visible").css("top",$(window).height()-950+"px")}}else{$(".changeSkin-gear").css("bottom","-999px");$(".cd-top.cd-is-visible").css("top","-900px");n.removeClass("cd-is-visible cd-fade-out")}if($(this).scrollTop()>t){n.addClass("cd-fade-out")}});n.on("click",function(e){e.preventDefault();$("body,html").animate({scrollTop:0},a)})}};$(function(){H.AH();H.PE();H.NH();H.GT();H.XLS();H.XCS();H.XCP();H.CE();H.MN();H.IA();H.LV();if(window.is_app)s("#nprogress .bar { display: none; }");if(Poi.pjax){$(document).pjax("a[target!=_top]","#page",{fragment:"#page",timeout:8e3}).on("pjax:send",function(){$("#bar").css("width","0%");if(mashiro_option.NProgressON)NProgress.start();H.MNH()}).on("pjax:complete",function(){H.AH();H.PE();H.CE();H.VA();H.MJ();H.AB();H.TOC();H.BSZ();if(mashiro_option.NProgressON)NProgress.done();mashiro_global.ini.pjax();$("#loading").fadeOut(500);if(Poi.codelamp=="open"){self.Prism.highlightAll(event)}if($(".ds-thread").length>0){if(typeof DUOSHUO!=="undefined"){DUOSHUO.EmbedThread(".ds-thread")}else{$.getScript("//static.duoshuo.com/embed.js")}}}).on("submit",".search-form,.s-search",function(e){e.preventDefault();$.pjax.submit(e,"#page",{fragment:"#page",timeout:8e3});if($(".js-search.is-visible").length>0){$(".js-toggle-search").toggleClass("is-active");$(".js-search").toggleClass("is-visible")}});mashiro_global.lib.pjax_to_url=function(e,t){$.pjax({url:e,container:t,fragment:t,timeout:8e3})};window.addEventListener("popstate",function(e){H.AH();H.PE();H.CE();S(true)},false)}$.fn.postLike=function(){if($(this).hasClass("done")){return false}else{$(this).addClass("done");var e=$(this).data("id"),t=$(this).data("action"),a=$(this).children(".count");var n={action:"specs_zan",um_id:e,um_action:t};$.post(Poi.ajaxurl,n,function(e){$(a).html(e)});return false}};$(document).on("click",".specsZan",function(){$(this).postLike()})});var W=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,R=navigator.userAgent.toLowerCase().indexOf("opera")>-1,U=navigator.userAgent.toLowerCase().indexOf("msie")>-1;if((W||R||U)&&document.getElementById&&window.addEventListener){window.addEventListener("hashchange",function(){var e=location.hash.substring(1),t;if(!/^[A-z0-9_-]+$/.test(e)){return}t=document.getElementById(e);if(t){if(!/^(?:a|select|input|button|textarea)$/i.test(t.tagName)){t.tabIndex=-1}t.focus()}},false)}function X(e,t){var a=/(\\)?\{([^\{\}\\]+)(\\)?\}/g;return e.replace(a,function(e,a,n,i){if(a||i){return e.replace("\\","")}var o=n.replace(/\s/g,"").split(".");var s=t;var r,l,c;for(r=0,l=o.length;r<l;++r){c=o[r];s=s[c];if(s===undefined||s===null)return""}return s})}String.prototype.render=function(e){return X(this,e)};$(document).ready(function(){setTimeout(function(){isFirstLoad=true;if(document.body.clientWidth>860){$(".changeSkin-gear").css("visibility","visible")}$("p").remove(".head-copyright")},0)});
//rebuild by hrmmi 